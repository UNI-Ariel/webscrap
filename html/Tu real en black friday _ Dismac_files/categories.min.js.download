define([""],function($){"use strict";return function(){const modalOverlay=document.getElementById('categories-modal');const modalBox=modalOverlay.querySelector('.categories-modal');const modalContent=modalOverlay.querySelector('.categories-modal-content');const closeBtn=document.getElementById('close-categories-modal');const navSection=document.querySelector('.custom-nav-sections');const trigger=document.getElementById('category-button');const BREAKPOINT=1039;function openModal(){document.body.style.overflow='hidden';modalOverlay.style.display='block';void modalOverlay.offsetWidth;modalOverlay.classList.add('show');adjustModal();}
function closeModal(){modalOverlay.classList.remove('show');document.body.style.overflow='';document.body.style.paddingRight='';modalOverlay.addEventListener('transitionend',function handler(){modalOverlay.style.display='none';modalOverlay.removeEventListener('transitionend',handler);});}
function adjustModal(){if(modalOverlay.style.display!=='block')return;const navRect=navSection.getBoundingClientRect();const offsetTop=navRect.bottom+20;modalBox.style.top=offsetTop+'px';const maxHeight=window.innerHeight-offsetTop-40;modalBox.style.maxHeight=maxHeight+'px';modalContent.style.maxHeight=maxHeight+'px';}
trigger.addEventListener('click',function(evt){evt.preventDefault();openModal();});closeBtn.addEventListener('click',closeModal);modalOverlay.addEventListener('click',function(evt){if(!modalBox.contains(evt.target)){closeModal();}});window.addEventListener('resize',function(){const w=window.innerWidth;if(w<BREAKPOINT){if(modalOverlay.style.display==='block'){modalOverlay.classList.remove('show');modalOverlay.style.display='none';document.body.style.overflow='';document.body.style.paddingRight='';}
return;}
if(w>=BREAKPOINT&&modalOverlay.style.display==='block'){adjustModal();}});const parentCategories=document.querySelectorAll('.parent-category:not(.without-child)');const containers=document.querySelectorAll('.container-by-category');parentCategories.forEach(item=>{item.addEventListener('click',function(e){e.preventDefault();const categoryId=this.getAttribute('data-category-id');parentCategories.forEach(el=>el.classList.remove('active'));this.classList.add('active');containers.forEach(c=>c.style.display='none');const target=document.querySelector(`.container-by-category[data-category-id="${categoryId}"]`);if(target){target.style.display='flex';}});});}});