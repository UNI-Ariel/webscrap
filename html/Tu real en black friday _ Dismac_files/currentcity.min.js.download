define(['uiComponent','Magento_Customer/js/customer-data','ko'],function(Component,customerData,ko){'use strict';return function(config){return Component.extend({storeName:ko.observable(''),storeCode:ko.observable(''),storeAbbreviated:ko.observable(''),storeId:ko.observable(''),stores:ko.observableArray([]),initialize:function(){this._super();let self=this;customerData.reload(['currentcity']).done(function(result){self.cityLoaded(result.currentcity);});},cityLoaded:function(data){this.storeAbbreviated(this.getAbbreviated(data.storeName));if(data.storeName=="Santa Cruz de la Sierra"){this.storeName("Santa Cruz");}else{this.storeName(data.storeName);}
this.storeCode(data.storeCode);this.stores(this.prepareStores(data.stores));this.storeId(data.currentStoreId);},getAbbreviated:function(store){switch(store){case'Santa Cruz de la Sierra':return'SCZ';case'Montero':return'MON';case'La Paz':return'LPZ';case'Cochabamba':return'CBBA';case'Tarija':return'TJA';case'Sucre':return'CH';default:return'';}},prepareStores:function(stores){let store;let filteredStores=[];for(store in stores){if(!Number.isInteger(parseInt(store))||stores[store].code===this.storeCode()){continue;}
let post=JSON.parse(stores[store].post);post.data.uenc=config.url;stores[store].post=JSON.stringify(post);filteredStores.push(stores[store]);}
return filteredStores;}});};});